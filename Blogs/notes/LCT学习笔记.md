LCT 好难啊呜呜呜

---------

## 引入

A：让我们开始吧。从问题引入：在线维护一个森林，有连边、断边、查询两点路径的操作。如果这是一个静态问题，你会怎么操作？

B：无断边加边，这就是树剖模板。

A：为什么要用树剖呢？

B：往上跳时若当前非其重儿子，即换了一条链，子树大小至少*2，保证任意点到根至多换log条链。链的存储连续，这让我们可以用其它数据结构维护序列。

A：我们是怎么把树剖开的呢？

B：通过人工挑选“重儿子”

A：开始引入第一对概念：“实儿子”与“虚儿子”。这样，树就被剖分成若干链了。用什么维护链比较好呢？

B：既然上链还动态了，当然用平衡树了！

-----------------

A：`makeroot x`？

A：`link x y`  连边？首先给出判定。

B：使用 `findroot` 判定，然后使用 `makeroot(x); makeroot(y);` 后直接 $y$ 对 $x$ 连虚边。